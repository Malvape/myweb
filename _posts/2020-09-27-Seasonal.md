---
title: "Descomponiendo una serie de tiempo"
date: 2020-09-27T23:00:00-05:00
categories:
  - R
tags:
  - Series de tiempo
  - Moving Average
toc: true
toc_label: "En esta página"
related: true
header:
  teaser: /assets/images/linea.png
  image: /assets/images/linea.png
---

Modelando nacimientos mensuales en NY con series de tiempo.
{: .notice}

<!--more-->

Éste ejercicio lo encontré en el siguiente [blog][albor].
{: .notice}


## Importando la data

Vamos a importar la data de la edad de los nacimientosmensuales en Nueva York desde Enero de 1946.

``` r
births <- scan("http://robjhyndman.com/tsdldata/data/nybirths.dat")
```

Tenemos exactamente 42 datos.

## Objeto `time series`

Para poder utilizar las herramientas que nos ofrece R para las series de
tiempo, tenemos que asignar los valores que hemos obtenido a un objeto
de este tipo (ts).

``` r
Birthstimeseries <- ts(births, frequency=12)
```

Ojo con el dato `frequency` [^1]

[^1]: Éste dato quiere decir, que las temporadas se repiten cada 12 undidades de tiempo (meses en este caso.)

## Graficando la serie de tiempo

``` r
plot.ts(Birthstimeseries)
```
![](/myweb/assets/images/Seasonal_files/figure-gfm/unnamed-chunk-1-1.png)<!-- -->


## Modelo Moving Average (MA)

Este modelo a diferencia del autoregresivo no si fija en valores pasados de la variable, sino su diferencia respecto al promedio, generalmente se utiliza en orden 1, asumiendo que valores más antiguos de la variable son insignificantes en determinar el valor presente de Y, Pero considerar valores de orden más grandes suaviza más curva.

-En el siguiente gráfico se utilizo un modelo [MA][MA] de orden 8.

``` r
library("TTR")

BirthstimeseriesSMA8 <- SMA(Birthstimeseries,n=8)
plot.ts(BirthstimeseriesSMA8)
```

![](/myweb/assets/images/Seasonal_files/figure-gfm/MA-1.png)<!-- -->

## Descomponiendo la data en sus factores

La data esta cláramente afectada por temporadas, y el efecto de éstas se
puede aislar de la tendencia de esta manera:

``` r
birthstimeseriescomponents <- decompose(Birthstimeseries)
plot(birthstimeseriescomponents)
```

![](/myweb/assets/images/Seasonal_files/figure-gfm/trend-1.png)<!-- -->

## Quitar componentes de la serie de tiempo

la serie de datos original tiene evidentemente todos los componentes,
pero nosotros podemos elegir que componentes queremos visualizar. Asi se
veria la serie sin el efecto de las temporadas.

``` r
birthstimeseriesseasonallyadjusted <- Birthstimeseries - birthstimeseriescomponents$seasonal
plot(birthstimeseriesseasonallyadjusted)
```

![](/myweb/assets/images/Seasonal_files/figure-gfm/componentes-1.png)<!-- -->



[MA]: https://www.investopedia.com/articles/active-trading/052014/how-use-moving-average-buy-stocks.asp
[albor]: https://a-little-book-of-r-for-time-series.readthedocs.io/en/latest/src/timeseries.html
